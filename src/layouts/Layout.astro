---
import "../styles/global.css";


interface Props {
	title?: string;
	description?: string;
}

const { title = "Random ID Generator", description = "A simple, modern tool for generating various types of random IDs." } = Astro.props;

const DEFAULT_THEME = "cupcake";
const DARK_THEME = "dark";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={description} />
		<title>{title}</title>

		{
			import.meta.env.PROD && (
				<>
					<!-- Google tag (gtag.js) -->
					<script
						is:inline
						async
						src="https://www.googletagmanager.com/gtag/js?id=G-V5C1Z2ZXD9"
					></script>
					<script is:inline>
						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments);}
						gtag('js', new Date());
						
						gtag('config', 'G-V5C1Z2ZXD9');
					</script>
				</>	
			)
		}
	</head>
	<body class="min-h-screen bg-base-200 flex flex-col">
		<div class="navbar bg-base-100 shadow-sm sticky top-0 z-50">
			<div class="navbar-start">
				<div class="dropdown">
					<div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
					</div>
					<ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-1 p-2 shadow bg-base-100 rounded-box w-52">
						<li><a href="/uuid">UUID</a></li>
						<li><a href="/cuid">CUID</a></li>
						<li><a href="/nanoid">Nano ID</a></li>
						<li><a href="/ulid">ULID</a></li>
						<li><a href="/password">Password</a></li>
					</ul>
				</div>
				<a href="/" class="btn btn-ghost text-xl">Random ID</a>
			</div>
			<div class="navbar-center hidden lg:flex">
				<ul class="menu menu-horizontal px-1 gap-1">
					<li><a href="/uuid">UUID</a></li>
					<li><a href="/cuid">CUID</a></li>
					<li><a href="/nanoid">Nano ID</a></li>
					<li><a href="/ulid">ULID</a></li>
					<li><a href="/password">Password</a></li>
				</ul>
			</div>
			<div class="navbar-end">
				<label class="swap swap-rotate btn btn-ghost btn-circle">
					<!-- this hidden checkbox controls the state -->
					<input type="checkbox" class="theme-controller" value={DARK_THEME} />
	
					<!-- sun icon -->
					<svg class="swap-off h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.71.71l.71-.71a1,1,0,0,0,0-1.41,1,1,0,0,0-1.41,0l-.71.71A1,1,0,0,0,5.64,7.05Zm13.01,7.38a1,1,0,0,0,.71.71l.71-.71a1,1,0,0,0,0-1.41,1,1,0,0,0-1.41,0l-.71.71A1,1,0,0,0,18.65,14.43Zm-7,7a1,1,0,0,0,1-1V20a1,1,0,0,0-2,0v1A1,1,0,0,0,12,21.43Zm7-14.43-.71-.71a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.41l.71.71a1,1,0,0,0,1.41,0A1,1,0,0,0,19.35,7ZM20.35,11a1,1,0,0,0-1,1h1a1,1,0,0,0,0-2h-1A1,1,0,0,0,20.35,11ZM12,6A6,6,0,1,0,18,12,6.01,6.01,0,0,0,12,6Z"/>
					</svg>
	
					<!-- moon icon -->
					<svg class="swap-on h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Z"/>
					</svg>
				</label>
			</div>
		</div>
		<slot />
	</body>
</html>

<script is:inline define:vars={{ DEFAULT_THEME, DARK_THEME }}>
	// ☝️ This script prevents the FART effect.
	const theme = localStorage.getItem("theme");
	if (theme === null) {
		document.documentElement.setAttribute("data-theme", DEFAULT_THEME);
	} else {
		document.documentElement.setAttribute("data-theme", theme);
	}

	function initTheme() {
		const themeController = document.querySelector(".theme-controller");
		if (!themeController) return;

		// Set initial state based on current theme
		const currentTheme =
			localStorage.getItem("theme") ||
			document.documentElement.getAttribute("data-theme") ||
			DEFAULT_THEME;

		if (currentTheme === DARK_THEME) {
			themeController.checked = true;
		} else {
			themeController.checked = false;
		}

		themeController.addEventListener("change", (e) => {
			const isDark = e.target.checked;
			const newTheme = isDark ? DARK_THEME : DEFAULT_THEME;

			localStorage.setItem("theme", newTheme);
			document.documentElement.setAttribute("data-theme", newTheme);
		});
	}

	// Initialize on page load (Astro View Transitions compatible)
	document.addEventListener("DOMContentLoaded", initTheme);
	document.addEventListener("astro:page-load", initTheme);
	// Also run immediately in case we're not using view transitions or DOMContentLoaded is already fired
	initTheme();
</script>
<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
